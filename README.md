Reads the Zotero library from a SQLite database file and finds all entries that have a local PDF file attached to it.
Exports (*i.e.*, copies) the pdfs to an export folder, putting them in subfolders given by the collection they belong in Zotero.


## Requirements

```bash
cd export-zotero-pdfs/
pyenv virtualenv 3.11 zotero
pyenv activate zotero
pip install -r requirements.txt
```

## Running

```bash
cd export-zotero-pdfs/
pyenv activate zotero

python main.py
```

Use `-h` parameters to see the available parameters.
By default, it will copy the pdfs to the `./zotero_out/` folder.

# Database diagram

The [complete diagram](imgs/zotero.png) was generated by the code mentioned [here](https://dev.to/sualeh/how-to-visualize-your-sqlite-database-with-one-command-and-nothing-to-install-1f4m). A simplified version contained the main tables used by `main.py` is shown below:


<pre>
+------------+          +------------+    +------------+    +-----------------+
| fields     |          | itemData   |    | items      |    | itemAttachments |
+------------+          +------------+    +------------+    +-----------------+
| fieldID    |────┐     | itemID     |────| itemID     |────| itemID          |
| fieldName  |    └─────| fieldID    |    | itemTypeID |─┐  | parentItemID    |
+------------+       ┌──| valueID    |    +------------+ │  | contentType     |
                     │  +------------+                   │  | path            |
+----------------+   │                                   │  +-----------------+
| itemDataValues |   │                                   │
+----------------+   │                                   │  +-----------------+
+ valueID        |───┘                                   │  | itemTypes       |
+ value          |                                       │  +-----------------+
+----------------+                                       └──| itemTypeId      |
                                                            | typeName        |
                                                            +-----------------+
</pre>


# Generate an executable with pyinstaller

```bash
cd export-zotero-pdfs/
pyenv activate zotero
pyinstaller --onefile --name export_zotero main.py
```

The executable named `export_zotero` will be placed in `./dist/main`.